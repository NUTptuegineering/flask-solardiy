<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ROI ‡∏£‡∏∞‡∏¢‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Solar Rooftop</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <style>
      .btn-choose {
        background: linear-gradient(to right, #89b6da, #c7d6e2);
        color: #003366;
        font-weight: 600;
        border: none;
        border-radius: 30px;
        padding: 8px 16px;
        font-size: 14px;
        box-shadow: 0 2px 6px rgba(0, 123, 255, 0.1);
        transition: 0.3s ease;
        display: inline-block;
        white-space: nowrap;
      }

      .btn-choose:hover {
        transform: scale(1.03);
        box-shadow: 0 4px 8px rgba(0, 123, 255, 0.2);
        text-decoration: none;
      }

      .btn-back-home {
        background: linear-gradient(to right, #89b6da, #c7d6e2);
        color: #003366;
        font-weight: 600;
        border: none;
        border-radius: 30px;
        padding: 8px 16px;
        font-size: 14px;
        box-shadow: 0 2px 6px rgba(0, 123, 255, 0.1);
        transition: 0.3s ease;
        display: inline-block;
        white-space: nowrap;
        text-decoration: none;
      }
      .btn-back-home:hover {
        background-color: #007bff;
        color: white;
        text-decoration: none;
      }
      .solar-heading {
        text-align: center;
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: #0d6efd;
        background: none;
        position: relative;
        line-height: 1.2;
      }
    </style>
    
    <script src="{{ url_for('static', filename='script3.js') }}" defer></script>
  </head>
  
<body class="bg-light py-5">
  <div class="text-center my-4">
    <div class="d-inline-flex flex-wrap justify-content-center gap-2">
      <a href="/" class="btn-back-home">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
      <a href="/Project_Estimation" class="btn-choose text-decoration-none">üìè ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÇ‡∏ã‡∏•‡∏≤‡∏£‡πå‡πÄ‡∏ã‡∏•‡∏•‡πå</a>
      <a href="/Cal_electric_price/" class="btn-choose text-decoration-none">üí° ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤</a>
      <a href="/ROI_Cal" class="btn-choose text-decoration-none">üî• ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ROI ‡∏£‡∏∞‡∏¢‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô</a>
      <a href="/Solarpanel" class="btn-choose text-decoration-none">üõ†Ô∏è ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ú‡∏á‡πÇ‡∏ã‡∏•‡∏≤‡∏£‡πå‡πÄ‡∏ã‡∏•‡∏•‡πå</a>
    </div>
  </div>

    <div class="card shadow-lg rounded-4 p-4 mx-auto" style="max-width: 960px;">
      <h2 class="solar-heading">üî• ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ROI ‡∏£‡∏∞‡∏¢‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Solar Rooftop</h2>

      <form method="post" id="roiForm">
        <label class="form-label mt-3">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á (‡∏ö‡∏≤‡∏ó)</label>
        <input type="number" name="cost" class="form-control" value="{{ cost or '' }}" required>

        <label class="form-label mt-3">‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏∞‡∏ö‡∏ö (kWp)</label>
        <input type="number" name="size" class="form-control" step="any" value="{{ size or '' }}" required>

        <label class="form-label mt-3">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏∞‡∏ö‡∏∏‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</label>
        <select id="genOption" class="form-select" required>
          <option value="default" selected>‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢ (1400)</option>
          <option value="province">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
          <option value="psh">‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô Peak Sun Hour (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á/‡∏ß‡∏±‡∏ô)</option>
        </select>

        <div id="provinceSection" class="mt-3" style="display: none;">
          <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label>
          <select id="provinceSelect" class="form-select">
            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î --</option>
          </select>
        </div>

        <div id="pshSection" class="mt-3" style="display: none;">
          <label class="form-label">Peak Sun Hour ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á/‡∏ß‡∏±‡∏ô)</label>
          <input type="number" id="pshInput" step="any" class="form-control" placeholder="‡πÄ‡∏ä‡πà‡∏ô 4.5">
        </div>

        <input type="hidden" name="gen" id="genInput" value="{{ gen or 1400 }}">

        <label class="form-label mt-3">‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (‡∏ö‡∏≤‡∏ó/kWh)</label>
        <input type="number" name="rate" value="{{ rate or 4.5 }}" class="form-control" step="any" required>

        <label class="form-label mt-3">‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏∞‡∏ö‡∏ö (‡∏õ‡∏µ)</label>
        <input type="number" name="lifetime" value="{{ lifetime or 20 }}" class="form-control" required>

        <div class="d-flex justify-content-center gap-2 mt-4">
          <button type="submit" class="btn btn-success">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
          <button type="button" class="btn btn-outline-danger" onclick="resetForm()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        </div>
      </form>

      {% if result %}
      <div id="resultBox" class="result alert alert-success mt-4">
        <strong>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:</strong><br>
        üí∞ ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á: {{ result['cost'] }} ‡∏ö‡∏≤‡∏ó<br>
        ‚ö° ‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏∞‡∏ö‡∏ö: {{ result['size'] }} kWp<br>
        üîã ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏¥‡∏ï‡∏ï‡πà‡∏≠‡∏õ‡∏µ: {{ result['gen_per_year'] }} kWh<br>
        üí∏ ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏∞‡∏ö‡∏ö: {{ result['total_save'] }} ‡∏ö‡∏≤‡∏ó<br>
        üìÜ ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô: {{ result['payback'] }} ‡∏õ‡∏µ<br>
        üìà ‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∞‡∏™‡∏°: {{ result['profit'] }} ‡∏ö‡∏≤‡∏ó<br>
        üìä ROI ‡∏ï‡∏•‡∏≠‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏∞‡∏ö‡∏ö: {{ result['roi'] }}%
      </div>
      
      <script>
        console.log("üìä ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ROI Solar Rooftop");
        console.log("1. ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏¥‡∏ï‡∏ï‡πà‡∏≠‡∏õ‡∏µ = {{ result['size'] }} √ó {{ gen }} = {{ result['gen_per_year'] }} kWh");
        console.log("2. ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏î‡πâ = {{ result['gen_per_year'] }} √ó {{ rate }} √ó {{ lifetime }} = {{ result['total_save'] }} ‡∏ö‡∏≤‡∏ó");
        console.log("3. ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏∏‡∏ô = {{ result['cost'] }} √∑ ({{ result['gen_per_year'] }} √ó {{ rate }}) = {{ result['payback'] }} ‡∏õ‡∏µ");
        console.log("4. ‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∞‡∏™‡∏° = {{ result['total_save'] }} - {{ result['cost'] }} = {{ result['profit'] }} ‡∏ö‡∏≤‡∏ó");
        console.log("5. ROI = ({{ result['profit'] }} √∑ {{ result['cost'] }}) √ó 100 = {{ result['roi'] }}%");
      </script>
      {% endif %}

    </div>
  </div>

  <script>
    function resetForm() {
      const form = document.getElementById("roiForm");

      form.querySelector('[name="cost"]').value = '';
      form.querySelector('[name="size"]').value = '';
      form.querySelector('[name="rate"]').value = '4.5';
      form.querySelector('[name="lifetime"]').value = '20';

      document.getElementById('genOption').value = 'default';
      document.getElementById('provinceSection').style.display = 'none';
      document.getElementById('pshSection').style.display = 'none';
      document.getElementById('provinceSelect').selectedIndex = 0;
      document.getElementById('pshInput').value = '';
      document.getElementById('genInput').value = '1400';

      const resultBox = document.getElementById('resultBox');
      if (resultBox) {
        resultBox.style.display = 'none';
        console.log("üì¶ ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
      }

      console.log("üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß");
    }

    </script>
</body>
</html>